#!/bin/bash
# This script compiles a Python file specified in the PYFILE environment variable.
# It then renames the output to match the desired format with a 'c' suffix.

# Check if PYFILE environment variable is set
if [ -z "$PYFILE" ]; then
    echo "PYFILE environment variable is not set."
    exit 1
fi

# Compile the Python file
echo "Compiling $PYFILE ..."
python3 -m py_compile "$PYFILE"

# Rename the output file to include 'c'
base="${PYFILE%.*}"
ext="${PYFILE##*.}"
mv "__pycache__/${base}.cpython-$(python3 -c 'import platform; print(platform.python_version_tuple()[0])').pyc" "${base}.pyc"
